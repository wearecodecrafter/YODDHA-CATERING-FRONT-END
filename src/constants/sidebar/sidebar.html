<aside
  class="w-64 h-[calc(100vh-4rem)] bg-black text-white/80 border-r border-white/10 overflow-y-auto"
>
  <div class="h-4 flex items-center px-6"></div>

  <nav class="mt-2 px-3">
    <ul class="space-y-1">
      <!-- Dashboard -->
      <li>
        <a
          routerLink="/dashboard/home"
          routerLinkActive="bg-white/10 text-white border-l-4 border-white"
          class="flex items-center px-3 py-2.5 text-sm rounded-lg hover:bg-white/10 hover:text-white transition-all"
        >
          <i class="bi bi-speedometer2 mr-3"></i>
          Dashboard
        </a>
      </li>

      <!-- ================= Employee Master ================= -->
      <li>
        <!-- Parent -->
        <button
          (click)="toggleEmployeeMaster()"
          class="w-full flex items-center justify-between px-3 py-2.5 text-sm rounded-lg hover:bg-white/10 transition-all"
        >
          <div class="flex items-center">
            <i class="bi bi-people mr-3"></i>
            Employee Master
          </div>

          <!-- Arrow -->
          <i
            class="bi bi-chevron-down transition-transform duration-200"
            [class.rotate-180]="isEmployeeMasterOpen"
          ></i>
        </button>

        <!-- Sub Menu -->
        <ul
          *ngIf="isEmployeeMasterOpen"
          class="ml-6 mt-1 space-y-1 border-l border-white/10 pl-3"
        >
          <li>
            <a
              routerLink="/dashboard/employees"
              routerLinkActive="bg-white/10 text-white border-l-4 border-white"
              class="block px-3 py-2 text-sm rounded-md hover:bg-white/10 transition"
            >
              Add Employee
            </a>
          </li>

          <li>
            <a
              routerLink="/dashboard/attendance"
              routerLinkActive="text-white font-medium"
              class="block px-3 py-2 text-sm rounded-md hover:bg-white/10 transition"
            >
              Attendance
            </a>
          </li>

          <li>
            <a
              routerLink="/dashboard/advance"
              routerLinkActive="text-white font-medium"
              class="block px-3 py-2 text-sm rounded-md hover:bg-white/10 transition"
            >
              Advance
            </a>
          </li>

          <li>
            <a
              routerLink="/dashboard/allowance"
              routerLinkActive="text-white font-medium"
              class="block px-3 py-2 text-sm rounded-md hover:bg-white/10 transition"
            >
              Allowance
            </a>
          </li>

          <li>
            <a
              routerLink="/dashboard/report"
              routerLinkActive="text-white font-medium"
              class="block px-3 py-2 text-sm rounded-md hover:bg-white/10 transition"
            >
              Report
            </a>
          </li>
        </ul>
      </li>

      <!-- ================= Settings ================= -->
      <li>
        <!-- Parent -->
        <button
          (click)="toggleSettings()"
          class="w-full flex items-center justify-between px-3 py-2.5 text-sm rounded-lg hover:bg-white/10 transition-all"
        >
          <div class="flex items-center">
            <i class="bi bi-gear mr-3"></i>
            Settings
          </div>

          <!-- Arrow -->
          <i
            class="bi bi-chevron-down transition-transform duration-200"
            [class.rotate-180]="isSettingsOpen"
          ></i>
        </button>

        <!-- Sub Menu -->
        <ul
          *ngIf="isSettingsOpen"
          class="ml-6 mt-1 space-y-2 border-l border-white/10 pl-3"
        >
          <li
            class="flex items-center justify-between px-3 py-2 rounded-md hover:bg-white/10 transition"
          >
            <span class="text-sm text-white/70">Enable 2FA</span>

            <!-- Toggle -->
            <label class="relative inline-flex items-center cursor-pointer">
              <input
                type="checkbox"
                class="sr-only peer"
                [checked]="is2FAEnabled"
                (change)="toggle2FA()"
              />
              <div
                class="w-10 h-5 bg-gray-600 peer-focus:outline-none rounded-full peer peer-checked:bg-green-500 after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:h-4 after:w-4 after:rounded-full after:transition-all peer-checked:after:translate-x-5"
              ></div>
            </label>
          </li>

          <!-- QR Code Display -->
          <li *ngIf="qrCodeData" class="px-3 py-2">
            <button
              (click)="showQRModal = true"
              class="text-sm text-blue-400 hover:text-blue-300 transition"
            >
              View QR Code
            </button>
          </li>
        </ul>
      </li>
    </ul>
  </nav>

  <!-- QR CODE MODAL -->
  <div
    *ngIf="showQRModal"
    class="fixed inset-0 z-50 flex items-center justify-center bg-black/70"
  >
    <div class="bg-white rounded-lg p-4 w-80 relative">
      <!-- Close -->
      <button
        class="absolute top-2 right-3 text-xl text-gray-500 hover:text-black"
        (click)="showQRModal = false"
      >
        &times;
      </button>

      <!-- Title -->
      <h3 class="text-base text-black font-semibold text-center mb-3">
        Scan QR Code
      </h3>

      <!-- QR Image -->
      <img
        *ngIf="qrCodeData"
        [src]="qrCodeData"
        class="mx-auto w-48 h-48 border p-1"
        alt="2FA QR Code"
      />

      <!-- Instruction -->
      <p class="text-xs text-gray-600 text-center mt-2">
        Scan using Google Authenticator or Authy
      </p>

      <!-- OTP Input (SMALL SIZE) -->
      <input
        type="text"
        maxlength="6"
        placeholder="Enter 6-digit OTP"
        [(ngModel)]="otpValue"
        class="mt-3 w-full px-2 py-1 text-sm border border-black rounded text-black placeholder-black focus:outline-none focus:ring-1 focus:ring-black"
      />

      <!-- Verify Button -->
      <button
        (click)="verifyOTP()"
        class="mt-3 w-full bg-black text-white text-sm py-1.5 rounded hover:bg-gray-800 transition"
      >
        Verify
      </button>
    </div>
  </div>

  <!-- DISABLE 2FA MODAL -->
  <div
    *ngIf="showDisableModal"
    class="fixed inset-0 z-50 flex items-center justify-center bg-black/70"
  >
    <div class="bg-white rounded-lg p-4 w-80 relative">
      <!-- Close -->
      <button
        class="absolute top-2 right-3 text-xl text-gray-500 hover:text-black"
        (click)="showDisableModal = false"
      >
        &times;
      </button>

      <!-- Title -->
      <h3 class="text-base text-black font-semibold text-center mb-3">
        Disable 2FA
      </h3>

      <!-- Instruction -->
      <p class="text-xs text-gray-600 text-center mb-3">
        Enter your OTP to disable 2FA
      </p>

      <!-- OTP Input -->
      <input
        type="text"
        maxlength="6"
        placeholder="Enter 6-digit OTP"
        [(ngModel)]="disableOtpValue"
        class="w-full px-2 py-1 text-sm border border-black rounded text-black placeholder-black focus:outline-none focus:ring-1 focus:ring-black"
      />

      <!-- Disable Button -->
      <button
        (click)="disable2FA()"
        class="mt-3 w-full bg-red-500 text-white text-sm py-1.5 rounded hover:bg-red-600 transition"
      >
        Disable 2FA
      </button>
    </div>
  </div>
</aside>
